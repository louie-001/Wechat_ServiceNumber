<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>注册页面</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">

    <!-- 可选的Bootstrap主题文件（一般不用引入） -->
    <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

    <!-- jquery库，使用bootCDN代理 -->
    <script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>

    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <!--vue.js-->
    <script src="//cdn.bootcss.com/vue/2.3.4/vue.min.js"></script>
    <!-- foundation资源库，使用bootCDN代理 -->
    <link rel="stylesheet" href="//cdn.bootcss.com/foundation/5.5.3/css/foundation.min.css">
    <link rel="stylesheet" href="//static.runoob.com/assets/foundation-icons/foundation-icons.css">
    <script src="//cdn.bootcss.com/foundation/5.5.3/js/foundation.min.js"></script>
    <script src="//cdn.bootcss.com/foundation/5.5.3/js/vendor/modernizr.js"></script>
    <script src="../js/com.xonro.common_util.js" type="text/javascript"></script>
    <style>
        .personimg{
            width: 36px;
            height: 36px;

        }
        .maleNoCheck{
            background: url(../images/regist/性别男.png) no-repeat;
            background-size:100%;
            display: inline-block;
        }
        .maleNameNoCheck{
            color: #CDCDCD;
        }
        .femaleNocheck{
            background: url(../images/regist/性别女.png) no-repeat;
            background-size:80%;
            display: inline-block;
        }
        .femaleNameNoCheck{
            color: #CDCDCD;
        }
        #male:checked+div{
            background: url(../images/regist/性别男2.png) no-repeat;
            background-size:100%;
            display: inline-block;
        }
        #female:checked+div{
            background: url(../images/regist/性别女2.png) no-repeat;
            background-size:80%;
            display: inline-block;
        }
        #male:checked+div+span{
            color: #6F5DE2;
        }
        #female:checked+div+span{
            color: #6F5DE2;
        }
        body{
            font-family: 微软雅黑;
        }
    </style>
    <script type="text/javascript">
        $().ready(function() {
            var validCode=false;
            $("#account").on("blur", function () {

             if (!checkMobile($(this).val())){
                 alert("手机号码不正确");
                 $("#getRandom1").attr("disabled",true);
             } else {
                $('.vertify').attr("disabled",false);
                validCode = true;
                 }
            })
//            $(".vertify").on("click", function () {
//                var time=60;
//                var code=$(this);
//                if (validCode) {
//                    validCode=false;
//                    code.addClass("msgs1");
//                    var t=setInterval(function  () {
//                        time--;
//                        code.val(time+"秒后可重新获取！");
//                        if (time==0) {
//                            clearInterval(t);
//                            code.val("重新获取");
//                            validCode=true;
//                            code.removeClass("msgs1");
//
//                        }
//                    },1000)
//                }
//            })
        });
    </script>
</head>
<body>
<form id="regist_form" style="height: 100%;margin: 0px;">
        <div id="smsZone" class="row content active" style="text-align: center" aria-hidden="false">
            <div style="width: 100%;height:180px;background: url(../images/login/top.png) no-repeat;background-size:100% 100%;color: white;font-size: 150%;text-align:center;line-height:180px;" >Wedobank智能理财师</div>
            <ul class="tabs" data-tab>
                <li class="tab-title active" style="width: 50%">
                    <a href="#home" style="padding-left: 0px;padding-right: 0px" @click="changeRole('INVESTOR')">
                        <i class="fi-torso"></i> 投资人注册
                    </a>
                </li>
                <li class="tab-title" style="width: 50%">
                    <a href="#home" style="color: firebrick;padding-left: 0px;padding-right: 0px" @click="changeRole('CFP')">
                        <i class="fi-torso-business"></i> 理财师注册
                    </a>
                </li>
            </ul>
            <div class="tabs-content">
                <div id="home" class="content active" style="padding: 20px;">
                    <form>
                        <div class="row">
                            <div class="large-12 columns">
                                <div class="small-6 columns ">
                                    <input type="radio" name="male" id="male" value="1" v-model="sex" style="display:none">
                                    <div class="maleNoCheck personimg" id="img1"></div>
                                    <span for="male" class="maleNameNoCheck">先生</span>
                                </div>
                                <div class="small-6 columns">
                                    <input type="radio" name="female" id="female" value="2" v-model="sex" style="display:none">
                                    <div class="femaleNocheck personimg" id="img2"></div>
                                    <span for="female" class="femaleNameNoCheck">女士</span>
                                </div>


                            </div>

                        </div>
                        <div class="row">
                            <div class="large-12 columns">
                                <input id="nickName" style="height:50px;border-style:none;border-bottom-style:solid;border-bottom-width:thin;border-bottom-color:#CEB8AD;" class="phone" type="text" placeholder="请输入姓名" name="nickName" v-model="nickName">
                            </div>
                        </div>
                        <div class="row">
                            <div class="large-12 columns">
                                <input id="account" style="height:50px;border-style:none;border-bottom-style:solid;border-bottom-width:thin;border-bottom-color:#CEB8AD;" class="phone" type="text" placeholder="请输入手机号" name="account" v-model="account">
                            </div>
                        </div>
                        <div class="row">
                            <div class="large-12 columns">
                                <div class="row">
                                    <div class="small-9 columns">
                                        <input id="verificationCode" style="height:50px;border-style:none;border-bottom-style:solid;border-bottom-width:thin;border-bottom-color:#CEB8AD;" type="text" name="verificationCode" placeholder="您的验证码" v-model="verificationCode">
                                    </div>
                                    <div class="small-3 columns">
                                        <a style="height:50px;color: rgb(110,93,226);line-height: 50px" class="button postfix vertify secondary" disabled="true" id="getRandom1" @click="getRandom">获取验证码</a>
                                    </div>
                                </div>


                            </div>
                        </div>
                        <div class="row">
                            <div class="large-12 colums">
                                <div class="small-6 columns">
                                    <button type="reset" class="button round expand secondary" style="border:1px solid rgb(110,93,226);color: rgb(110,93,226)">重置</button>
                                </div>
                                <div class="small-6 columns">
                                    <button type="button" class="button round expand" style="background-color: rgb(110,93,226)" @click="regist">立即注册</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
    </div>



    <!--<div class="tabs-content">-->
        <!--<div class="content active" id="home">-->
            <!--<div class="form-group row" style="height:100px;padding: 10px;" >-->
                <!--<label for="nickName" class="col-sm-4 control-label">姓名：</label>-->
                <!--<div class="col-sm-8">-->
                    <!--<span class="glyphicon glyphicon-user form-control-feedback" style="right: 20px"></span>-->
                    <!--<input type="text" class="form-control"  name="nickName" v-model="nickName">-->
                <!--</div>-->
            <!--</div>-->

            <!--<div class="form-group row" style="height:100px;padding: 10px;">-->
                <!--<label for="sex" class="col-sm-4 control-label">性别：</label>-->
                <!--<div class="col-sm-8">-->
                    <!--<select id="sex" class="form-control" v-model="sex">-->
                        <!--<option value="1">男</option>-->
                        <!--<option value="2">女</option>-->
                    <!--</select>-->
                <!--</div>-->
            <!--</div>-->
            <!--<div class="form-group row" style="height:100px;padding: 10px;">-->
                <!--<label for="account" class="col-sm-4 control-label">手机号：</label>-->
                <!--<div class="col-sm-8">-->
                    <!--<span class="glyphicon glyphicon-phone form-control-feedback" style="right: 20px"></span>-->
                    <!--<input type="text" class="form-control"  name="account" v-model="account">-->
                <!--</div>-->
            <!--</div>-->
            <!--<div class="form-group row" style="height:100px;padding: 10px;">-->
                <!--<label for="verificationCode" class="col-sm-4 control-label">短信验证码：</label>-->
                <!--<div class="col-sm-8">-->
            <!--<span style="display:block;position:absolute;z-index:2;  right: 20px;line-height: 26px">-->
                <!--<input class="btn btn-info vertify"  disabled=true @click="getRandom" value="获取">-->
            <!--</span>-->
                    <!--<input type="text" class="form-control" iname="verificationCode" v-model="verificationCode">-->
                <!--</div>-->
            <!--</div>-->
            <!--<div class="form-group row" style="height:100px;padding: 10px;">-->
                <!--<div class="col-sm-12">-->
                    <!--<button type="reset" class="btn btn-warning" style="width: 100px;float: left">重置</button>-->
                    <!--<button type="button" class="btn btn-warning" style="width: 100px; float: right" @click="regist">立即注册</button>-->
                <!--</div>-->
            <!--</div>-->
        <!--</div>-->

    <!--</div>-->

</form>
</body>
<script>
    $(document).ready(function() {
        $(document).foundation();
        $("#male").click();
        $("#img1").on("click", function (){
            $("#male").click();
        })
        $("#img2").on("click", function (){
            $("#female").click();
        })
    })
</script>
<script>
    new Vue({
        el:"#regist_form",
        data:{
            nickName:"",
            sex:"",
            account:"",
            verificationCode:"",
            role:"INVESTOR"
        },
        methods:{
            changeRole:function (roleName) {
                this.role = roleName;
            },
            getRandom:function () {//获取验证码
                if($("#getRandom1").attr("disabled")){
                    return false;
                }
                getSmsToken(this.account);
                $("#getRandom1").attr("disabled",true);
                $("#getRandom1").addClass("secondary");
                var endTime = 60;
                var t = setInterval(function () {
                    endTime--;
                    $("#getRandom1").html("重新获取("+endTime+")");
                    if (endTime == 0){
                        clearInterval(t);
                        $("#getRandom1").html("重新获取");
                        $("#getRandom1").attr("disabled",false);
                    }
                },1000);
            },
            regist:function () {//用户注册
                if (this.nickName==""){
                    alert("姓名不能为空！")
                } else if (!checkMobile(this.account)) {
                    alert("请输入格式正确的手机号")
                } else if (this.verificationCode=="") {
                    alert("请输入短信验证码！")
                } else {
                    $.ajax({
                        url:"../regist",
                        data:this.$data,
                        type:"POST",
                        dataType:"json",
                        success:function (res) {
                            console.log(res);
                            if (!res.ok){
                                alert(res.msg);
                            }else {
                                alert("恭喜，注册成功");
                                window.location = "com.xonro.user_login.html";
                            }
                        }
                    });
                }

            }
        }
    })

    /**
     * 向用户发送验证码
     * @param mobileNumber
     */
    function getSmsToken(mobileNumber) {
        $.ajax({
            url:"../randomToken",
            data:{mobile:mobileNumber},
            type:"POST",
            success:function (res) {
                console.log(res);
            }
        });
    }
</script>
</html>